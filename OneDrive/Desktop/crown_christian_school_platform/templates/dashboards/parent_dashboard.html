{% extends "base.html" %}
{% block content %}
<div class="row mb-4" role="main" aria-labelledby="dashboard-title">
  <div class="col-12 mb-4">
    <h1 id="dashboard-title" class="fw-bold display-5" aria-label="Parent Dashboard"><i class="bi bi-people-fill me-2"></i>Parent Dashboard</h1>
    <div class="text-muted">Welcome, <span class="visually-hidden">Parent:</span> {{ parent }}</div>
    <span class="visually-hidden" id="dashboard-sections">Dashboard Sections: My Children, School News, Upcoming Events, Quick Links</span>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card shadow-sm h-100">
      <div class="card-body">
  <h2 class="card-title h5" aria-label="My Children"><i class="bi bi-person-badge me-2"></i>My Children</h2>
  <span class="visually-hidden">Section: My Children</span>
        <ul class="list-group" aria-label="Children List">
          {% if my_children %}
            {% for child in my_children %}
              <li class="list-group-item"><span class="visually-hidden">Child:</span> <strong>{{ child.first_name }} {{ child.last_name }}</strong> (Grade {{ child.grade_level }})</li>
            {% endfor %}
          {% else %}
            <li class="list-group-item text-muted">No children found.</li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card shadow-sm h-100">
      <div class="card-body">
  <h2 class="card-title h5" aria-label="School News"><i class="bi bi-megaphone me-2"></i>School News</h2>
  <span class="visually-hidden">Section: School News</span>
        <ul class="list-group" aria-label="School News List">
          {% if school_news %}
            {% for msg in school_news %}
              <li class="list-group-item"><span class="visually-hidden">News:</span> <strong>{{ msg.subject }}</strong><br><span class="text-muted small">{{ msg.created|date:'M d, Y' }}</span><br>{{ msg.body|truncatewords:12 }}</li>
            {% endfor %}
          {% else %}
            <li class="list-group-item text-muted">No news available.</li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card shadow-sm h-100">
      <div class="card-body">
  <h2 class="card-title h5" aria-label="Upcoming Events"><i class="bi bi-calendar-event me-2"></i>Upcoming Events</h2>
  <span class="visually-hidden">Section: Upcoming Events</span>
        <ul class="list-group" aria-label="Upcoming Events List">
          {% if upcoming_events %}
            {% for event in upcoming_events %}
              <li class="list-group-item"><span class="visually-hidden">Event:</span> <strong>{{ event.title }}</strong><br><span class="text-muted small">{{ event.date|date:'M d, Y' }}</span></li>
            {% endfor %}
          {% else %}
            <li class="list-group-item text-muted">No upcoming events.</li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="row mb-4">
  <div class="col-12">
    <div class="card shadow-sm">
      <div class="card-header bg-info text-white">
  <h2 class="mb-0 h5" aria-label="Quick Links">Quick Links</h2>
  <span class="visually-hidden">Section: Quick Links</span>
      </div>
      <div class="card-body d-flex flex-wrap gap-3" role="navigation" aria-label="Quick Links">
        <a href="/students/" class="btn btn-primary" aria-label="Students">Students</a>
        <a href="/events/" class="btn btn-success" aria-label="Events">Events</a>
        <a href="/communications/" class="btn btn-secondary" aria-label="Communications">Communications</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
