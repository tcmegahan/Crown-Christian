---
name: Web CI

on:
 push:
 branches: [ main ]
 pull_request:
 branches: [ main ]

permissions:
 contents: read

jobs:
 build-and-artifact:
 runs-on: ubuntu-latest
 steps:
 - name: Checkout
 uses: actions/checkout@v4

 - name: Setup Node
 uses: actions/setup-node@v4
 with:
 node-version: '20'
 cache: 'pnpm'

 - name: Install pnpm
 run: npm i -g pnpm

 - name: Install deps
 run: pnpm i --prefix apps/web

 - name: Build
 run: pnpm --prefix apps/web build

 - name: Upload artifact
 uses: actions/upload-artifact@v4
 with:
 name: web-build
 path: apps/web/dist
